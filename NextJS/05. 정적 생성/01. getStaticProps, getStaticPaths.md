# 01. getStaticProps, getStaticPaths

## ğŸ“ Pre-rendering
1. No Pre-rendering
   í˜ì´ì§€ì— ì•„ë¬´ê²ƒë„ ì—†ê³ , JSê°€ ë¡œë“œëœ í›„ í˜ì´ì§€ ë‚´ìš©ì´ ì±„ì›Œì§
2. Pre-rendering
   ì‚¬ì „ì— ë§Œë“¤ì–´ì§„ í˜ì´ì§€ ì¶œë ¥(ë©”íƒ€ ë°ì´í„° í¬í•¨), JS ë¡œë“œ í›„ `<Link />` ê°™ì€ ì»´í¬ë„ŒíŠ¸ ì‘ë™ ì‹œì‘ -> **Hydration**
3. NextJSëŠ” í˜ì´ì§€ ë³„ë¡œ ì •ì  ìƒì„±í•  ì§€, SSR í•  ì§€ **ì„ íƒ**í•˜ê³  **í˜¼ìš©**í•  ìˆ˜ ìˆìŒ

### 1. Static Generation (ê¶Œì¥)
1. **build ì‹œ ë¯¸ë¦¬ HTML íŒŒì¼ ìƒì„±** -> ê·¸ í›„ ìš”ì²­ì‹œ ë§ˆë‹¤ ë˜‘ê°™ì€ HTMLì„ ì¬ì‚¬ìš©
2. ì–¸ì œ ì‚¬ìš©í• ê¹Œ? ëŒ€ë¶€ë¶„ì˜ ì¼€ì´ìŠ¤ëŠ” ì •ì  ìƒì„±ì´ í›¨ì”¬ ë¹ ë¥´ê³  ì¢‹ë‹¤! (ìš”ì²­ ì „ ë¯¸ë¦¬ ë§Œë“œëŠ” ê²½ìš°)
   * ë§ˆì¼€íŒ… í˜ì´ì§€
   * ë¸”ë¡œê·¸ ê²Œì‹œë¬¼
   * ì œí’ˆ ëª©ë¡
   * ë„ì›€ë§, ë¬¸ì„œ ë“±..
3. `getStaticProps`, `getStaticPaths`

### 2. Server-Side Rendering
1. **ìš”ì²­í•  ë•Œë§ˆë‹¤ HTML íŒŒì¼ ìƒì„±** í›„ í‘œì‹œ
2. í•­ìƒ ìµœì‹  ìƒíƒœ ìœ ì§€
3. ì–¸ì œ ì‚¬ìš©í• ê¹Œ?
   * ê´€ë¦¬ì í˜ì´ì§€
   * ë¶„ì„ ì°¨íŠ¸
4. `getServerSideProps`

## ğŸ‘©â€ğŸ’» getStaticPaths
1. `/view/[id]`ì™€ ê°™ì€ pathì¼ ê²½ìš° id í•˜ë‚˜í•˜ë‚˜ ëŒ€ì‘í•´ html ë§Œë“¤ê¸° ì–´ë ¤ì›Œì„œ ë¯¸ë¦¬ ì •ì  ìƒì„± ë¶ˆê°€ -> ì–´ë–¤ idê°€ ë“¤ì–´ì˜¬ ì§€ ëª°ë¼ì„œ
   * but `id`ì˜ ê°œìˆ˜, ê°’ì„ ì•Œ ìˆ˜ ìˆë‹¤ë©´ `getStaticPaths` + `getStaticProps`ë¥¼ ì‚¬ìš©í•´ ì •ì  ìƒì„± ê°€ëŠ¥
2. ë¯¸ë¦¬ ì–´ë–¤ `paths(params)`ê°€ ë“¤ì–´ì˜¬ ì§€ ì˜ˆì¸¡ -> `params` ê°’ì€ urlì— í¬í•¨ë˜ë¯€ë¡œ `string`ìœ¼ë¡œ ì œê³µë¼ì•¼ í•¨
3. ë¹Œë“œëœ html íŒŒì¼ì€ `.next/server/pages/view/`ì— ì¡´ì¬ -> ë¯¸ë¦¬ ì œê³µëœ htmlì´ë¯€ë¡œ ì†ë„ ë¹ ë¦„. í•œë²ˆ ë°©ë¬¸í•˜ë©´ ìºì‹œë¨

```typescript
export async function getStaticPaths() {
  return {
    paths: [{ params: { id: "495" } }, { params: { id: "488" } }, { params: { id: "477" } }], // 0. ë¯¸ë¦¬ ì´ˆê¸° ë°°ì—´ì„ ë°›ì•„ì„œ paths ë°°ì—´ë¡œ ì œê³µí•  ìˆ˜ ìˆìŒ
    fallback: true // 1.
  };
}

export async function getStaticProps(context: ContextProps) {
   ...
}
```
1. ì–´ë–¤ `path`ê°€ ë“¤ì–´ì˜¬ ì§€ return
2. `fallback`
   1. `false` (default) : ì—†ëŠ” í˜ì´ì§€ ëŒ€ì‘í•˜ì§€ ì•ŠìŒ pathë¡œ ì£¼ì–´ì§€ì§€ ì•Šì€ url ì ‘ì† ì‹œ 404
   2. `true` : ì²˜ìŒì—ëŠ” ë¹ˆ í™”ë©´ì´ ëœ¬ í›„ propsê°€ ì±„ì›Œì§ -> staticPathsê°€ ë¹Œë“œ ì‹œì ì— ë§Œë“¤ì–´ì§€ëŠ” ê±´ ë³€í•¨ X

## ğŸ‘©â€ğŸ’» fallback: true, getStaticPaths, next/link

1. ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì •ì  íŒŒì¼ë¡œ htmlê³¼ jsonì„ ìƒì„±í•´ì¤Œ
2. ì²« ë²ˆì§¸ ì ‘ì† ì‹œ pre-renderingì— ì¶”ê°€ í›„ ë‘ ë²ˆì¨° ì ‘ì†ë¶€í„° ì •ì  ìƒì„±ëœ í˜ì´ì§€ë¥¼ ì‚¬ìš© -> í˜ì´ì§€ê°€ êµ‰ì¥íˆ ë§ì„ ê²½ìš° ìœ ìš©í•¨. ì²˜ìŒì— ë§ì€ pre-renderingì„ í•  ê²½ìš° ë¶€ë‹´ìŠ¤ëŸ¬ìš°ë¯€ë¡œ
3. `next/link`ì˜ `prefetch` (default: `true`)
   *  `<Link />`ë¡œ ê°ì‹¸ì§„ ì œí’ˆ ëª©ë¡ê°™ì€ í˜ì´ì§€ë¥¼ ì ‘ê·¼í•˜ê±°ë‚˜ ìŠ¤í¬ë¡¤ì„ ë‚´ë¦¬ë©´, **ë·° í¬íŠ¸ ë‚´ë¶€ì— ìˆëŠ” ë§í¬ë“¤ì€ ë‹¤ pre-load** ë¨ network íƒ­ì—ì„œ idë¥¼ ìš”ì²­ 
   * ì˜ˆì‹œë¡œ `/detail/[id]` ë¼ëŠ” ë§í¬ë¥¼ ë·° í¬íŠ¸ì—ì„œ ì¸ì‹í•˜ê³  -> ì¸ì‹í•˜ëŠ” ìˆœê°„ `/detail/[id]` í˜ì´ì§€ì˜ ì •ì  htmlì„ pre-rendering í•  ì¤€ë¹„ë¥¼ í•˜ëŠ” ê²ƒ.

```typescript
function Detail({ item }: DetailProps) {
  const router = useRouter();

  if (router.isFallback) {
    // isFallback: trueì¼ ë•Œ ì²˜ë¦¬
    return <div>Loading...</div>;
  }

  const { data } = item;

  if (isErrorProps(data)) {
    return <Error statusCode={data.statusCode} />;
  }

  const { name, description }: AddProps = data;

  return (
    <>
      <Head>
        <title>{`${name} | ìƒì„¸`}</title>
        <meta name="description" content={description}></meta>
      </Head>
      <Item item={data} />
      <Divider />
      <p>{description}</p>
    </>
  );
}
```
* `isFallback: true` ìƒíƒœì¼ ë•Œ ë”°ë¡œ return í•„ìš”! ë¹Œë“œ ì—ëŸ¬