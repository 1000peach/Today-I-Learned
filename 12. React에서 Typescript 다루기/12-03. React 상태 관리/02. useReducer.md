# 02. `useReducer` (Typescript Ver.)

1. **state, action, return** typeì„ ì •ì˜í•œ í›„ í‰ìƒì‹œì²˜ëŸ¼ reducer êµ¬í˜„ -> dispatchí•  ë•Œ action ê°’ì´ ìë™ ì™„ì„±ë¼ì„œ í¸ë¦¬í•¨

## ğŸ‘©â€ğŸ’» ì¹´ìš´í„° ì˜ˆì œ

```typescript
/* Counter.tsx */

import React, { useReducer } from "react";

type Action = { type: "INCREASE" } | { type: "DECREASE" }; // action typeì„ í•˜ë‚˜ì˜ Actionì— typeì„ ì •ì˜

function reducer(state: number, action: Action): number {
  switch (action.type) {
    case "INCREASE":
      return state + 1;
    case "DECREASE":
      return state - 1;
    default:
      throw new Error("unhandled acton error");
  }
}

function Counter() {
  const [count, dispatch] = useReducer(reducer, 0); // params: reducer ê°ì²´, ì´ˆê¹ƒê°’ 0
  const onIncrease = () => dispatch({ type: "INCREASE" });
  const onDecrease = () => dispatch({ type: "DECREASE" });

  return (
    <div>
      <h1>{count}</h1>
      <div>
        <button onClick={onIncrease}>+1</button>
        <button onClick={onDecrease}>-1</button>
      </div>
    </div>
  );
}

export default Counter;
```
* ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ê°’ì´ +1, -1 ë˜ëŠ” `useReducer` ì¹´ìš´í„° ì˜ˆì œ

## ğŸ‘©â€ğŸ’» ì—¬ëŸ¬ í´ë¦­ ì´ë²¤íŠ¸ ì˜ˆì œ

```typescript
/* ReducerSample.tsx */

import { useReducer } from "react";

type Color = "red" | "orange" | "yellow"; // ëª©ë¡ ì¤‘ í•˜ë‚˜ì˜ ê°’

type State = {
  count: number;
  text: string;
  color: Color;
  isGood: boolean;
};

// action type ì •ì˜í•  ë•Œ '|' ì¶”ê°€í•´ì„œ ì •ë¦¬
type Action =
  | { type: "SET_COUNT"; count: number }
  | { type: "SET_TEXT"; text: string }
  | { type: "SET_COLOR"; color: Color }
  | { type: "TOGGLE_GOOD" };

// ê°ì²´ reducer í•¨ìˆ˜ëŠ” ë§¨ ë§ˆì§€ë§‰ì— Stateë¥¼ ë°˜í™˜í•´ì•¼ -> ex) ìœ„ì²˜ëŸ¼ stateê°€ number í•˜ë‚˜ë¼ë©´ numberê°€ return type...
function reducer(state: State, action: Action): State {
  switch (action.type) {
    case "SET_COUNT": {
      return { ...state, count: action.count }; // ìë™ ì™„ì„±
    }
    case "SET_TEXT": {
      return {
        ...state,
        text: action.text
      };
    }
    case "SET_COLOR": {
      return {
        ...state,
        color: action.color
      };
    }
    case "TOGGLE_GOOD": {
      return {
        ...state,
        isGood: !state.isGood
      };
    }
    default:
      throw new Error("unhandled action type");
  }
}

function ReducerSample() {
  const [state, dispatch] = useReducer(reducer, {
    count: 0,
    text: "hello",
    color: "red",
    isGood: true
  });

  const setCount = () => dispatch({ type: "SET_COUNT", count: 5 });
  const setText = () => dispatch({ type: "SET_TEXT", text: "bye" });
  const setColor = () => dispatch({ type: "SET_COLOR", color: "orange" });
  const toggleGood = () => dispatch({ type: "TOGGLE_GOOD" });

  return (
    <div>
      <p>
        <code>count: </code> {state.count}
      </p>
      <p>
        <code>count: </code> {state.text}
      </p>
      <p>
        <code>count: </code> {state.color}
      </p>
      <p>
        <code>count: </code> {state.isGood ? "true" : "false"}
        {/* booleanì€ í˜ì´ì§€ì— ë‚˜íƒ€ë‚˜ì§€ ì•Šìœ¼ë¯€ë¡œ */}
      </p>
      <div>
        <button onClick={setCount}>SET_COUNT</button>
        <button onClick={setText}>SET_TEXT</button>
        <button onClick={setColor}>SET_COLOR</button>
        <button onClick={toggleGood}>TOGGLE_GOOD</button>
      </div>
    </div>
  );
}

export default ReducerSample;
```
* í´ë¦­ ë²„íŠ¼ì— ë”°ë¼ action ë°œìƒ -> ëŒ€ì‘í•˜ëŠ” state ê°’ ë³€í™”